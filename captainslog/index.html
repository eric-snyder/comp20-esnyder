<!DOCTYPE html>

<html>

<head>
	<title>Captain's Log</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script>
	  //launch code on document ready
	$(document).ready(function(){

		var msgArray = [];
		var storedMsg = [];
		storedMsg = localStorage.getItem("messages");
		if (storedMsg != undefined) {
			//print out objects in the msgArray
			for (var i = storedMsg.length; i > 0; i-- ){
				$("#log").prepend(storedMsg[i]);
			};
		};

	  		//when somebody presses enter into the box
	  		$("#msg").keypress(function(event) {
				if (event.which == 13) {
				// add a list item
					//create message variable to store
					var input = $("#msg").val(); 
					//create the date item to store
					var date = new Date;
					//create the total message
					var totalMessage = date + " - " + input;
					//prepend message to the list
					$("#log").prepend( "<li>" + totalMessage + "</li>");
					//add the new message to the front of the array
					msgArray.unshift(totalMessage);
					//store this array in localStorage
					localStorage.setItem("messages", storedMsg + msgArray);
	  			}
	  		});
	});

	</script>
</head>

<body>
	<h1>Captain's Log</h1>
	<h3>New entry: <input type="text" id="msg" name="msg" size="30" /></h3>
	<div id="log"></div>
</body>
</html>